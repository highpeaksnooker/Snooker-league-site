<!doctype html>
<meta charset="utf-8">
<title>Players diag</title>
<pre id="out">Loadingâ€¦</pre>
<script>
(async () => {
  try {
    const players = await fetch('data/players.json').then(r => r.json());
    const teams   = await fetch('data/teams.json').then(r => r.json());
    const byTeam = players.reduce((m,p)=>((m[p.teamId]=(m[p.teamId]||0)+1),m),{});
    const lines = [];
    lines.push('Total players: ' + players.length);
    lines.push('');
    lines.push('Teams found in teams.json: ' + teams.map(t=>t.id).join(', '));
    lines.push('');
    lines.push('Players per team:');
    for (const k of Object.keys(byTeam).sort()) lines.push('  ' + k + ': ' + byTeam[k]);
    document.getElementById('out').textContent = lines.join('\n');
  } catch (e) {
    document.getElementById('out').textContent = 'Error: ' + e.message;
  }
})();
</script>
